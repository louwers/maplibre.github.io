<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="map[]"><meta name=keywords content><meta name=description content><meta name=theme-color content="#fff"><meta property="og:image" content="https://maplibre.org/img/share-image.png"><meta property="og:image:width" content="1024"><meta property="og:image:height" content="512"><meta property="og:image:alt" content="MapLibre"><meta property="og:title" content="maplibre-rs monthly"><meta property="og:description" content><meta property="og:url" content="https://maplibre.org/news/2022-09-24-maplibre-rs-monthly/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@maplibre"><meta name=twitter:creator content="@maplibre"><meta name=twitter:title content="maplibre-rs monthly"><meta name=twitter:description content><meta name=twitter:image:src content="https://maplibre.org/img/share-image.png"><meta name=twitter:image:alt content="MapLibre"><link rel=manifest href=/site.webmanifest><link rel=me href=https://mastodon.social/@maplibre><link rel=stylesheet href=/style.min.ef3084827a6b5ef4d2f039fa78d6674f83e4fabf31236807b6b319fbdd91c4d2.css><link rel=stylesheet href=/mapbox-gl.731181d400d65a8b09d842f55b70bc4dc11010b15b8549e2c65a69d233fbdd2e.css><script type=text/javascript src=/main.fea956d6c119ab3df842ffd5d7dcdff8afc18739340e6bcf5ac4d6a153ef083c.js></script><title>maplibre-rs monthly |
MapLibre</title></head><body><nav class="navbar navbar-expand-lg navbar-dark
bg-navbar"><div class=container><a class=navbar-brand href=/ aria-label=MapLibre><object height=30 width=120 data=/img/maplibre-logo.svg type=image/svg+xml></object></a><div class=d-flex><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarNavAltMarkup aria-controls=navbarNavAltMarkup aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button></div><div class="collapse navbar-collapse justify-content-end" id=navbarNavAltMarkup><div class=navbar-nav><li><a class=nav-link href=/about/>About</a></li><li><a class=nav-link href=/jobs/>Jobs</a></li><li><a class=nav-link href=/roadmap/>Roadmap</a></li><li><a class=nav-link href=/sponsors/>Sponsors</a></li><li><a class=nav-link href=/news/>News</a></li><li><a class=nav-link href=/community/>Community</a></li></div></div></div></nav><div class="container-fluid px-0 mb-6"><div class="row mx-0 bg-title text-center align-items-center"><h1 class="text-white pt-6">maplibre-rs monthly</h1></div></div><div class=container><div class="row justify-content-center"><div class="col-md-10 col-lg-8 mb-4"><div class=post-meta-date><time datetime=" 2022-09-24">Sep 24, 2022</time>
<span>·</span>
<span>3 minutes read</span></div><div>Categories:
<span class="badge bg-light"><a href=https://maplibre.org/categories/maplibre-rs/>maplibre-rs</a></span></div><div>Authors:
<span><span class="badge bg-light"><a href=https://maplibre.org/authors/maxammann/>Max Ammann</a></span></span></div></div><div class="col-md-10 col-lg-8"><div><p><a href=https://github.com/maplibre/maplibre-rs>maplibre-rs</a> is an upcoming and cross-platform vector map renderer written in Rust. If you want to get in touch with the developers, visit the <a href=https://matrix.to/#/#mapr:matrix.org>#maplibre:matrix.org</a> chat or join the MapLibre (#maplibre and #maplibre-rs) community within the OpenStreetMap Slack. You can get an invitation <a href=https://slack.openstreetmap.us>here</a>.</p><h2 id=-news>📰 News <a class=heading-link href=#-news></a></h2><p>It has been an exciting summer - FOSS4G happened and a <a href=https://maplibre.org/news/2022-08-24-maplibre-rs-paper/>paper</a> about maplibre-rs was published. The whole MapLibre team was able to meet! We met our sponsors and other awesome people from the open-source community.</p><p>And because a picture is worth a thousand words:</p><figure><img class="w-50 p-3" src=/news/2022-09-24-maplibre-rs-monthly/collage_hue932f6db28f06d1f90ab005648c62aa1_5428699_1000x0_resize_q75_h2_box.webp alt="Our community" width=1000px><figcaption>Our community</figcaption></figure><p>Behind the scenes, I was working on providing an alternative multi-threading implementation for the web platform. Because atomics are only supported by <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer>enabling specific HTTP headers</a>, we really need a more portable implementation which does not rely on these atomics. Instead of doing real multithreading in the browser, we want to do multiprocessing through WebWorkers. I designed an interface which should work well for most data-processing needs. The interface is called <code>AsyncProcedureCall</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Rust data-lang=Rust><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span><span style=color:#007020>#[derive(Clone)]</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>enum</span> <span style=color:#0e84b5;font-weight:700>Message</span><span style=color:#666>&lt;</span>T: <span style=color:#0e84b5;font-weight:700>Transferables</span><span style=color:#666>&gt;</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#bbb>    </span>TileTessellated(T::TileTessellated),<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#bbb>    </span>UnavailableLayer(T::UnavailableLayer),<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#bbb>    </span>TessellatedLayer(T::TessellatedLayer),<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bbb></span><span style=color:#007020>#[derive(Clone, Serialize, Deserialize)]</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>enum</span> <span style=color:#0e84b5;font-weight:700>Input</span><span style=color:#bbb> </span>{<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bbb>    </span>TileRequest(TileRequest),<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>type</span> <span style=color:#0e84b5;font-weight:700>AsyncProcedure</span><span style=color:#666>&lt;</span>C<span style=color:#666>&gt;</span><span style=color:#bbb> </span><span style=color:#666>=</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>fn</span>(input: <span style=color:#0e84b5;font-weight:700>Input</span>,<span style=color:#bbb> </span>context: <span style=color:#0e84b5;font-weight:700>C</span>)<span style=color:#bbb> </span>-&gt; <span style=color:#0e84b5;font-weight:700>AsyncProcedureFuture</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#bbb></span><span style=color:#007020;font-weight:700>pub</span><span style=color:#bbb> </span><span style=color:#007020;font-weight:700>trait</span><span style=color:#bbb> </span>AsyncProcedureCall<span style=color:#666>&lt;</span>T: <span style=color:#0e84b5;font-weight:700>Transferables</span>,<span style=color:#bbb> </span><span style=color:#60add5>HC</span>: <span style=color:#0e84b5;font-weight:700>HttpClient</span><span style=color:#666>&gt;</span>: <span style=color:#007020>&#39;static</span> {<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>type</span> <span style=color:#0e84b5;font-weight:700>Context</span>: <span style=color:#0e84b5;font-weight:700>Context</span><span style=color:#666>&lt;</span>T,<span style=color:#bbb> </span><span style=color:#60add5>HC</span><span style=color:#666>&gt;</span><span style=color:#bbb> </span><span style=color:#666>+</span><span style=color:#bbb> </span><span style=color:#007020>Send</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>fn</span> <span style=color:#06287e>receive</span>(<span style=color:#666>&amp;</span><span style=color:#007020;font-weight:700>mut</span><span style=color:#bbb> </span>self)<span style=color:#bbb> </span>-&gt; <span style=color:#007020>Option</span><span style=color:#666>&lt;</span>Message<span style=color:#666>&lt;</span>T<span style=color:#666>&gt;&gt;</span>;<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#bbb>    </span><span style=color:#007020;font-weight:700>fn</span> <span style=color:#06287e>schedule</span>(<span style=color:#666>&amp;</span>self,<span style=color:#bbb> </span>input: <span style=color:#0e84b5;font-weight:700>Input</span>,<span style=color:#bbb> </span>procedure: <span style=color:#0e84b5;font-weight:700>AsyncProcedure</span><span style=color:#666>&lt;</span>Self::Context<span style=color:#666>&gt;</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#bbb></span>}<span style=color:#bbb>
</span></span></span></code></pre></div><p>Instead of relying on mutexes and MPSC channels, the implementation of this <code>APC</code> for the web relies on WebWorkers and sending <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer>ArrayBuffers</a>.</p><p>I&rsquo;m working on this in a rather large <a href=https://github.com/maplibre/maplibre-rs/pull/174>PR</a>. As not much else is going on in the project, merging probably won&rsquo;t cause issues.</p><h2 id=-housekeeping>🏠 Housekeeping <a class=heading-link href=#-housekeeping></a></h2><p>The following will summarizes what happened last week on GitHub.</p><h3 id=-merged-pull-requests>🎁 Merged Pull Requests <a class=heading-link href=#-merged-pull-requests></a></h3><ul><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/169>#169</a> Add watch functionality for web by <a href=https://github.com/maxammann>@maxammann</a><br>We have now build tools for the web which automatically reloads the demo in the browser for changes in Rust.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/167>#167</a> Add citation instructions by <a href=https://github.com/maxammann>@maxammann</a><br>The maplibre-rs is now officially citable in others scientific work!</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/160>#160</a> Add CLI to demo by <a href=https://github.com/maxammann>@maxammann</a><br>A CLI allows users now to configure the demo on Linux, Windows and macOS.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/154>#154</a> Run scheduled builds by <a href=https://github.com/maxammann>@maxammann</a><br>We regularly build our main branch now, to detect breaking dependencies.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/pull/80>#80</a> Refactor WebWorker pool by <a href=https://github.com/maxammann>@maxammann</a><br>This is the start of a major refactor for async tasks on the web.</p></li></ul><h3 id=-new-issues>🎁 New Issues <a class=heading-link href=#-new-issues></a></h3><ul><li><p><a href=https://github.com/maplibre/maplibre-rs/issues/166>#166</a> ReferenceError: Can&rsquo;t find variable: Worker by <a href=https://github.com/maxammann>@maxammann</a><br>This bug blocks us currently on Safari (iOS/macOS). I&rsquo;m actively working right now to provide a build which does not use atomics.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/issues/164>#164</a> INVALID_ENUM: framebuffertexture2d invalid attachment by <a href=https://github.com/maxammann>@maxammann</a><br>This is a bug in older versions in Safari. With the release of iOS 16 and Safari 16 this is fixed now.</p></li><li><p><a href=https://github.com/maplibre/maplibre-rs/issues/161>#161</a> Limit the maximum and minimum zoom level by <a href=https://github.com/hanchao>@hanchao</a><br>We got a great bug report! It seems like people are experimenting with maplibre-rs in the wild!</p></li></ul><h3 id=-current-discussions>🧵 Current Discussions <a class=heading-link href=#-current-discussions></a></h3><p>None.</p><h3 id=-contributors>👋 Contributors <a class=heading-link href=#-contributors></a></h3><ul><li><a href=https://github.com/karisair>@karisair</a></li><li><a href=https://github.com/birkskyum>@birkskyum</a></li><li><a href=https://github.com/BezPowell>@BezPowell</a></li><li><a href=https://github.com/Quillasp>@Quillasp</a> - Thanks for working on raster tile support!</li></ul></div></div></div></div><footer class=mt-auto><div class="container pb-4 pt-6"></div><hr><div class=container><div class="row py-3"><div class=col-4><a href=/ aria-label=MapLibre><object height=30 width=120 data=/img/maplibre-logo.svg type=image/svg+xml></object></a></div><div class=col-8><div class="nav justify-content-end"><a class="nav-link text-white" href=https://mastodon.social/@maplibre aria-label="MapLibre on Mastodon"><svg id="mas" viewBox="0 0 16 16" width="16" height="16" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M15.659 9.592C15.424 10.72 13.553 11.956 11.404 12.195 10.283 12.32 9.18 12.434 8.003 12.384 6.079 12.302 4.56 11.956 4.56 11.956 4.56 12.13 4.572 12.297 4.595 12.452c.25 1.772 1.883 1.878 3.43 1.927C9.586 14.429 10.976 14.02 10.976 14.02L11.04 15.337S9.948 15.884 8.003 15.984C6.93 16.039 5.598 15.959 4.047 15.576.683 14.746.104 11.4.015 8.006-.012 6.998.005 6.048.005 5.253.005 1.782 2.443.765 2.443.765 3.672.238 5.782.017 7.975.0H8.029c2.192.017 4.303.238 5.532.765.0.0 2.438 1.017 2.438 4.488.0.0.0310000000000006 2.561-.34 4.339zm-2.535-4.07V9.725H11.339V5.646c0-.86-.388-1.296-1.164-1.296C9.317 4.35 8.887 4.867 8.887 5.891V8.124H7.113V5.891C7.113 4.867 6.683 4.35 5.825 4.35c-.776.0-1.164.436-1.164 1.296V9.725H2.876V5.522c0-.859.235-1.541.706-2.046.485-.505 1.121-.764 1.911-.764C6.406 2.712 7.098 3.039 7.555 3.695L8 4.39l.445-.695C8.902 3.039 9.594 2.712 10.507 2.712 11.297 2.712 11.933 2.971 12.418 3.476 12.889 3.981 13.124 4.663 13.124 5.522z" style="stroke:none;stroke-miterlimit:10;fill-rule:evenodd"/></svg></a><a class="nav-link text-white" href=https://twitter.com/maplibre aria-label="MapLibre on X"><svg width="16" height="16" viewBox="0 0 1200 1227" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M714.163 519.284 1160.89.0H1055.03L667.137 450.887 357.328.0H0L468.492 681.821.0 1226.37H105.866L515.491 750.218 842.672 1226.37H12e2L714.137 519.284H714.163zM569.165 687.828l-47.468-67.894L144.011 79.6944H306.615L611.412 515.685l47.468 67.894 396.2 566.721H892.476L569.165 687.854V687.828z" fill="#fff"/></svg></a><a class="nav-link text-white" href=https://www.linkedin.com/company/maplibre aria-label="MapLibre on Linkedin"><svg width="18" height="18" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M8 72H64c4.418278.0 8-3.581722 8-8V8c0-4.418278-3.581722-8-8-8H8c-4.418278 811624501e-24-8 3.581722-8 8V64c541083001e-24 4.418278 3.581722 8 8 8z" fill="#fff"/><path d="M62 62H51.315625V43.8021149c0-4.9893607-1.8958333-7.7775826-5.8449219-7.7775826-4.2960937.0-6.540625 2.901578-6.540625 7.7775826V62H28.6333333V27.3333333H38.9300781v4.669595s3.0959636-5.7287132 10.452474-5.7287132C56.7356771 26.2742151 62 30.7644705 62 40.051212V62zM16.349349 22.7940133C12.8420573 22.7940133 10 19.9296567 10 16.3970067 10 12.8643566 12.8420573 10 16.349349 10c3.5072916.0 6.3476562 2.8643566 6.3476562 6.3970067.0 3.53265-2.8403646 6.3970066-6.3476562 6.3970066zM11.0325521 62H21.769401V27.3333333H11.0325521V62z" fill="#000"/></g></svg></a><a class="nav-link text-white" href=https://github.com/MapLibre aria-label="MapLibre on GitHub"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 30 30"><use href="/img/github.svg#github"/></svg></a></div></div></div></div></footer></body></html>